<!DOCTYPE html>
<html>
  <head>
    <title>Fuel Demand Form</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .form-container {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f2f2f2;
        border: 1px solid #ccc;
        border-radius: 5px;
      }

      label {
        display: block;
        margin-bottom: 10px;
        font-weight: bold;
      }

      body {
        background-color: lightblue;
      }

      input[type="text"],
      input[type="date"],
      input[type="time"],
      select {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }

      input[type="submit"] {
        background-color: #4caf50;
        color: #fff;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <h2>Fuel Demand Form</h2>
      <form id="fuel-demand-form" action="/submitFuelDemand" method="POST">
        <label for="customer_name">Customer Name:</label>
        <input type="text" id="customer_name" name="customer_name" required />

        <label for="fuel_type">Fuel Type:</label>
        <select id="fuel_type" name="fuel_type" required>
          <option value="Gasoline">Gasoline</option>
          <option value="Diesel">Diesel</option>
          <option value="Petrol">Petrol</option>
          <option value="Kerosene">Kerosene</option>
        </select>

        <label for="quantity">Quantity:</label>
        <input type="text" id="quantity" name="quantity" required />

        <label for="delivery_date">Delivery Date:</label>
        <input type="date" id="delivery_date" name="delivery_date" required />

        <label for="delivery_time">Delivery Time:</label>
        <input type="time" id="delivery_time" name="delivery_time" required />

        <input type="submit" value="Submit" name="submit_fuel" />
      </form>
    </div>
    <script>
      document
        .getElementById("fuel-demand-form")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          var customerName = document.getElementById("customer_name").value;
          var fuelType = document.getElementById("fuel_type").value;
          var quantity = document.getElementById("quantity").value;
          var deliveryDate = document.getElementById("delivery_date").value;
          var deliveryTime = document.getElementById("delivery_time").value;

          // Perform validation checks
          if (
            !customerName ||
            !fuelType ||
            !quantity ||
            !deliveryDate ||
            !deliveryTime
          ) {
            alert("Please fill in all the fields.");
            return;
          }

          try {
            // Send the form data to the server using fetch and a POST request
            const response = await fetch("http://localhost:3000/fuelRestock", {
              method: "POST",
              headers: {
                "Content-Type": "application/json", // Assuming the server expects JSON data
              },
              body: JSON.stringify({
                customer_name: customerName,
                fuel_type: fuelType,
                restocked_amount: quantity,
                delivery_date: deliveryDate,
                delivery_time: deliveryTime,
              }),
            });

            if (response.ok) {
              // The server successfully processed the fuel demand submission
              // You can redirect to a success page or show a success message here
              window.location.href = "fuel_inventory.html";
            } else {
              // Handle error responses from the server
              const errorMessage = await response.text();
              alert(
                `Error occurred during fuel demand submission: ${errorMessage}`
              );
            }
          } catch (error) {
            console.error(
              "Error occurred during fuel demand submission:",
              error
            );
            alert(
              "An error occurred during fuel demand submission. Please try again later."
            );
          }
        });
    </script>
  </body>
</html>
